var SlickUI={};Phaser.Plugin.SlickUI=function(a,b){Phaser.Plugin.call(this,a,b)},Phaser.Plugin.SlickUI.prototype=Object.create(Phaser.Plugin.prototype),Phaser.Plugin.SlickUI.prototype.constructor=Phaser.Plugin.SamplePlugin,Phaser.Plugin.SlickUI.prototype.load=function(a){this.container=new SlickUI.Container.Container(null);var b=a.replace(/\/[^\/]+$/,"/");game.load.json("slick-ui-theme",a),game.load.resetLocked=!0,game.load.start();var c=!1,d=function(){if(game.cache.checkJSONKey("slick-ui-theme")&&!c){var a=game.cache.getJSON("slick-ui-theme");for(var e in a.images)game.load.image("slick-ui-"+e,b+a.images[e]);for(e in a.fonts)game.load.bitmapFont(e,b+a.fonts[e][0],b+a.fonts[e][1]);c=!0,game.load.onFileComplete.remove(d)}};game.load.onFileComplete.add(d,this)},Phaser.Plugin.SlickUI.prototype.add=function(a){return this.container.add(a)},SlickUI.Container=SlickUI.Container?SlickUI.Container:{},SlickUI.Container.Container=function(a){this.parent=a,this.children=[],this.displayGroup=game.add.group(),a?(a.displayGroup.add(this.displayGroup),this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height):(this.x=0,this.y=0,this.width=game.width,this.height=game.height)},SlickUI.Container.Container.prototype.add=function(a){return a.setContainer(this),"function"==typeof a.init&&a.init(),game.world.bringToTop(this.displayGroup),this.children.push(a),a},SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Button=function(a,b,c,d){this._x=a,this._y=b,this._offsetX=a,this._offsetY=b,this._width=c,this._height=d,this.container=null},SlickUI.Element.Button.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.Button.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme"),b=this.container.x=this.container.parent.x+this._x,c=this.container.y=this.container.parent.y+this._y,d=this.container.width=Math.min(this.container.parent.width-this._x,this._width),e=this.container.height=Math.min(this.container.parent.height-this._y,this._height);this.container.x+=Math.round(a.button["border-x"]/2),this.container.y+=Math.round(a.button["border-y"]/2),this.container.width-=a.button["border-x"],this.container.height-=a.button["border-y"];var f=function(f){var g=game.add.bitmapData(d,e);return g.copyRect(f,new Phaser.Rectangle(0,0,a.button["border-x"],a.button["border-y"])),g.copy(f,a.button["border-x"]+1,0,1,a.button["border-y"],a.button["border-x"],0,d-2*a.button["border-x"],a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(f.width-a.button["border-x"],0,a.button["border-x"],a.button["border-y"]),d-a.button["border-x"]),g.copy(f,0,a.button["border-y"]+1,a.button["border-x"],1,0,a.button["border-y"],a.button["border-x"],e-2*a.button["border-y"]),g.copy(f,f.width-a.button["border-x"],a.button["border-y"]+1,a.button["border-x"],1,d-a.button["border-x"],a.button["border-y"],a.button["border-x"],e-2*a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(0,f.height-a.button["border-y"],a.button["border-x"],a.button["border-y"]),0,e-a.button["border-y"]),g.copyRect(f,new Phaser.Rectangle(f.width-a.button["border-x"],f.height-a.button["border-y"],a.button["border-x"],a.button["border-y"]),d-a.button["border-x"],e-a.button["border-y"]),g.copy(f,a.button["border-x"]+1,f.height-a.button["border-y"],1,a.button["border-y"],a.button["border-x"],e-a.button["border-y"],d-2*a.button["border-x"],a.button["border-y"]),g.copy(f,a.button["border-x"],a.button["border-y"],1,1,a.button["border-x"],a.button["border-y"],d-2*a.button["border-x"],e-2*a.button["border-y"]),game.make.sprite(b,c,g)};this.spriteOff=f(game.make.sprite(0,0,"slick-ui-button_off")),this.spriteOn=f(game.make.sprite(0,0,"slick-ui-button_on")),this.sprite=game.make.button(b,c),this.sprite.loadTexture(this.spriteOff.texture),this.container.displayGroup.add(this.sprite),this.sprite.x=b,this.sprite.y=c,this._offsetX=b,this._offsetY=c,this.sprite.fixedToCamera=!0;var g=!1;this.sprite.events.onInputOver.add(function(){g=!0},this),this.sprite.events.onInputOut.add(function(){g=!1},this),this.sprite.events.onInputDown.add(function(){this.sprite.loadTexture(this.spriteOn.texture)},this),this.sprite.events.onInputUp.add(function(){this.sprite.loadTexture(this.spriteOff.texture),g||this.sprite.events.onInputUp.halt()},this),this.events=this.sprite.events},SlickUI.Element.Button.prototype.add=function(a){return this.container.add(a)},Object.defineProperty(SlickUI.Element.Button.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(a){this._x=a,this.container.displayGroup.x=this.container.parent.x+a-this._offsetX}}),Object.defineProperty(SlickUI.Element.Button.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(a){this._y=a,this.container.displayGroup.y=this.container.parent.y+a-this._offsetY}}),Object.defineProperty(SlickUI.Element.Button.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(a){this.container.displayGroup.visible=a}}),Object.defineProperty(SlickUI.Element.Button.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(a){this.container.displayGroup.alpha=a}}),Object.defineProperty(SlickUI.Element.Button.prototype,"width",{get:function(){return this.container.width},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._width=Math.round(a+b.button["border-x"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),Object.defineProperty(SlickUI.Element.Button.prototype,"height",{get:function(){return this.container.height},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._height=Math.round(a+b.button["border-y"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Checkbox=function(a,b,c){this._x=a,this._y=b,this.container=null,this._checked=!1,this.type=c,"undefined"==typeof c&&(this.type=SlickUI.Element.Checkbox.TYPE_CHECKBOX)},SlickUI.Element.Checkbox.TYPE_CHECKBOX=0,SlickUI.Element.Checkbox.TYPE_RADIO=1,SlickUI.Element.Checkbox.TYPE_CROSS=2,SlickUI.Element.Checkbox.prototype.setContainer=function(a){this.container=a},SlickUI.Element.Checkbox.prototype.init=function(){var a,b=this.container.x+this._x,c=this.container.y+this._y;switch(this.type){case SlickUI.Element.Checkbox.TYPE_RADIO:a="radio";break;case SlickUI.Element.Checkbox.TYPE_CROSS:a="cross";break;default:a="check"}this.sprite=game.make.sprite(b,c,"slick-ui-"+a+"_off"),this._spriteOff=game.make.sprite(0,0,"slick-ui-"+a+"_off"),this._spriteOn=game.make.sprite(0,0,"slick-ui-"+a+"_on"),this.displayGroup=game.add.group(),this.displayGroup.add(this.sprite),this.container.displayGroup.add(this.displayGroup),this.sprite.inputEnabled=!0,this.sprite.fixedToCamera=!0,this.input.useHandCursor=!0,this.events.onInputDown.add(function(){this.checked=!this.checked},this)},Object.defineProperty(SlickUI.Element.Checkbox.prototype,"x",{get:function(){return this.displayGroup.x+this._x},set:function(a){this.displayGroup.x=a-this._x}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"y",{get:function(){return this.displayGroup.y+this._y},set:function(a){this.displayGroup.y=a-this._y}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"checked",{get:function(){return this._checked},set:function(a){this._checked=a,a?this.sprite.loadTexture(this._spriteOn.texture):this.sprite.loadTexture(this._spriteOff.texture)}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"visible",{get:function(){return this.sprite.visible},set:function(a){this.sprite.visible=a}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"alpha",{get:function(){return this.sprite.alpha},set:function(a){this.sprite.alpha=a}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"events",{get:function(){return this.sprite.events}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"input",{get:function(){return this.sprite.input}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"width",{get:function(){return this.sprite.width},set:function(a){this.sprite.width=a}}),Object.defineProperty(SlickUI.Element.Checkbox.prototype,"height",{get:function(){return this.sprite.height},set:function(a){this.sprite.height=a}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.DisplayObject=function(a,b,c,d,e){this._x=a,this._y=b,this._offsetX=a,this._offsetY=b,this.displayObject=c,this.container=null,this._width=d,this._height=e,"undefined"==typeof d&&(this._width=game.width),"undefined"==typeof e&&(this._height=game.height)},SlickUI.Element.DisplayObject.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.DisplayObject.prototype.init=function(){var a=this.container.x=this.container.parent.x+this._x,b=this.container.y=this.container.parent.y+this._y;this.container.width=Math.min(this.container.parent.width-this._x,this._width),this.container.height=Math.min(this.container.parent.height-this._y,this._height),!this.displayObject instanceof Phaser.Sprite?this.sprite=game.make.sprite(a,b,this.displayObject):this.sprite=this.displayObject,this.container.displayGroup.add(this.sprite),this.sprite.x=a,this.sprite.y=b,this._offsetX=a,this._offsetY=b,this.sprite.fixedToCamera=!0},SlickUI.Element.DisplayObject.prototype.add=function(a){return this.container.add(a)},Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(a){this._x=a,this.container.displayGroup.x=this.container.parent.x+a-this._offsetX}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(a){this._y=a,this.container.displayGroup.y=this.container.parent.y+a-this._offsetY}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(a){this.container.displayGroup.visible=a}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(a){this.container.displayGroup.alpha=a}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"inputEnabled",{get:function(){return this.sprite.inputEnabled},set:function(a){this.sprite.inputEnabled=a,a?this.input=this.sprite.input:this.input=null}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"events",{get:function(){return this.sprite.events}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"width",{get:function(){return this.container.width},set:function(a){this._width=a,this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),Object.defineProperty(SlickUI.Element.DisplayObject.prototype,"height",{get:function(){return this.container.height},set:function(a){this._height=a,this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Panel=function(a,b,c,d){this._x=a,this._y=b,this._offsetX=a,this._offsetY=b,this._width=c,this._height=d,this.container=null},SlickUI.Element.Panel.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.Panel.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme"),b=game.make.sprite(0,0,"slick-ui-panel"),c=game.add.bitmapData(game.width,game.height),d=this.container.x=this.container.parent.x+this._x,e=this.container.y=this.container.parent.y+this._y,f=this.container.width=Math.min(this.container.parent.width-this._x,this._width),g=this.container.height=Math.min(this.container.parent.height-this._y,this._height);this.container.x+=Math.round(a.panel["border-x"]/2),this.container.y+=Math.round(a.panel["border-y"]/2),this.container.width-=a.panel["border-x"],this.container.height-=a.panel["border-y"],c.copyRect(b,new Phaser.Rectangle(0,0,a.panel["border-x"],a.panel["border-y"])),c.copy(b,a.panel["border-x"]+1,0,1,a.panel["border-y"],a.panel["border-x"],0,f-2*a.panel["border-x"],a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(b.width-a.panel["border-x"],0,a.panel["border-x"],a.panel["border-y"]),f-a.panel["border-x"]),c.copy(b,0,a.panel["border-y"]+1,a.panel["border-x"],1,0,a.panel["border-y"],a.panel["border-x"],g-2*a.panel["border-y"]),c.copy(b,b.width-a.panel["border-x"],a.panel["border-y"]+1,a.panel["border-x"],1,f-a.panel["border-x"],a.panel["border-y"],a.panel["border-x"],g-2*a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(0,b.height-a.panel["border-y"],a.panel["border-x"],a.panel["border-y"]),0,g-a.panel["border-y"]),c.copyRect(b,new Phaser.Rectangle(b.width-a.panel["border-x"],b.height-a.panel["border-y"],a.panel["border-x"],a.panel["border-y"]),f-a.panel["border-x"],g-a.panel["border-y"]),c.copy(b,a.panel["border-x"]+1,b.height-a.panel["border-y"],1,a.panel["border-y"],a.panel["border-x"],g-a.panel["border-y"],f-2*a.panel["border-x"],a.panel["border-y"]),c.copy(b,a.panel["border-x"],a.panel["border-y"],1,1,a.panel["border-x"],a.panel["border-y"],f-2*a.panel["border-x"],g-2*a.panel["border-y"]),this._sprite=this.container.displayGroup.create(d,e,c),this._sprite.fixedToCamera=!0,this._offsetX=d,this._offsetY=e},SlickUI.Element.Panel.prototype.add=function(a){return this.container.add(a)},Object.defineProperty(SlickUI.Element.Panel.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(a){this._x=a,this.container.displayGroup.x=this.container.parent.x+a-this._offsetX}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(a){this._y=a,this.container.displayGroup.y=this.container.parent.y+a-this._offsetY}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(a){this.container.displayGroup.visible=a}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(a){this.container.displayGroup.alpha=a}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"width",{get:function(){return this.container.width},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._width=Math.round(a+b.panel["border-x"]),this._sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this._sprite)}}),Object.defineProperty(SlickUI.Element.Panel.prototype,"height",{get:function(){return this.container.height},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._height=Math.round(a+b.panel["border-y"]),this._sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this._sprite)}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Slider=function(a,b,c,d){this._x=a,this._y=b,this._width=c,this._value=d,this.container=null,"undefined"==typeof d&&(this._value=1)},SlickUI.Element.Slider.prototype.setContainer=function(a){this.container=a},SlickUI.Element.Slider.prototype.init=function(){game.cache.getJSON("slick-ui-theme");this.onDragStart=new Phaser.Signal,this.onDrag=new Phaser.Signal,this.onDragStop=new Phaser.Signal;var a=this.container.x+this._x,b=this.container.y+this._y,c=Math.min(this.container.width-this._x,this._width),d=Math.min(1,Math.max(0,this._value))*c+a,e=game.make.sprite(0,0,"slick-ui-slider_base"),f=game.make.sprite(0,0,"slick-ui-slider_end"),g=game.add.bitmapData(c,f.height);g.copy(e,0,0,1,e.height,0,Math.round(f.height/4),c,e.height),g.copy(f,0,0,f.width,f.height,0,0,f.width,f.height),g.copy(f,0,0,f.width,f.height,c-f.width,0,f.width,f.height);var h=game.make.sprite(0,0,"slick-ui-slider_handle_off"),i=game.make.sprite(0,0,"slick-ui-slider_handle_on");e=game.make.sprite(a,b,g),sprite_handle=game.make.sprite(d,b,"slick-ui-slider_handle_off"),sprite_handle.anchor.setTo(.5),sprite_handle.inputEnabled=!0,sprite_handle.input.useHandCursor=!0;var j=!1;sprite_handle.events.onInputDown.add(function(){sprite_handle.loadTexture(i.texture),j=!0,this.onDragStart.dispatch((sprite_handle.x-a)/c)},this),sprite_handle.events.onInputUp.add(function(){sprite_handle.loadTexture(h.texture),j=!1,this.onDragStop.dispatch((sprite_handle.x-a)/c)},this),game.input.addMoveCallback(function(b,d){j&&(sprite_handle.x=Math.min(a+c,Math.max(a,d-this.container.displayGroup.x)),this.onDrag.dispatch((sprite_handle.x-a)/c))},this),this.container.displayGroup.add(e),this.container.displayGroup.add(sprite_handle)},SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.Text=function(a,b,c,d,e,f,g){this._x=a,this._y=b,this._value=c,this.width=f,this.height=g,this.font=e,this.size=d,"undefined"==typeof this.width&&(this.width=game.width),"undefined"==typeof this.height&&(this.height=game.height),"undefined"==typeof this.size&&(this.size=16),this.container=null},SlickUI.Element.Text.prototype.setContainer=function(a){this.container=a},SlickUI.Element.Text.prototype.reset=function(a,b,c){var d,e;d=Math.min(this.container.width-a,this.width),e=Math.min(this.container.height-b,this.height),"undefined"!=typeof this.text&&(c===!1&&(d=this.text.maxWidth,e=this.text.maxHeight),this.text.destroy()),a+=this.container.x,b+=this.container.y,this.text=game.make.bitmapText(a,b,this.font,this._value,this.size),this.text.maxWidth=d,this.text.maxHeight=e,this.container.displayGroup.add(this.text),this.text.fixedToCamera=!0},SlickUI.Element.Text.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme");"undefined"==typeof this.font&&(this.font=Object.keys(a.fonts)[Object.keys(a.fonts).length-1]),this.reset(this._x,this._y)},SlickUI.Element.Text.prototype.centerHorizontally=function(){return this.text.cameraOffset.x=this.text.maxWidth/2-this.text.width/2+this.container.x,this},SlickUI.Element.Text.prototype.centerVertically=function(){var a=game.cache.getJSON("slick-ui-theme");return this.text.cameraOffset.y=this.container.height/2-this.text.height/2-Math.round(a.button["border-y"]/2)+this.container.y,this},SlickUI.Element.Text.prototype.center=function(){return this.centerHorizontally(),this.centerVertically(),this},Object.defineProperty(SlickUI.Element.Text.prototype,"x",{get:function(){return this.text.cameraOffset.x-this.container.x},set:function(a){this.text.cameraOffset.x=a+this.container.x}}),Object.defineProperty(SlickUI.Element.Text.prototype,"y",{get:function(){return this.text.cameraOffset.y-this.container.y},set:function(a){this.text.cameraOffset.y=a+this.container.y}}),Object.defineProperty(SlickUI.Element.Text.prototype,"value",{get:function(){return this.text.text},set:function(a){this.text.text=a}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.TextButton=function(a,b,c,d,e,f,g,h,i,j){this._x=a,this._y=b,this._value=c,this.width=f,this.height=g,this.font=e,this.size=d,this.tint=h,this.hoverTint=i,this.downTint=j,"undefined"==typeof this.width&&(this.width=game.width),"undefined"==typeof this.height&&(this.height=game.height),"undefined"==typeof this.size&&(this.size=16),"undefined"==typeof this.size&&(this.size=16),"undefined"==typeof this.tint&&(this.tint=16777215),"undefined"==typeof this.hoverTint&&(this.hoverTint=16777215),"undefined"==typeof this.downTint&&(this.downTint=16777215),this.container=null},SlickUI.Element.TextButton.prototype.setContainer=function(a){this.container=a},SlickUI.Element.TextButton.prototype.reset=function(a,b,c){var d,e;d=Math.min(this.container.width-a,this.width),e=Math.min(this.container.height-b,this.height),"undefined"!=typeof this.text&&(c===!1&&(d=this.text.maxWidth,e=this.text.maxHeight),this.text.destroy()),a+=this.container.x,b+=this.container.y,this.text=game.make.bitmapText(a,b,this.font,this._value,this.size),this.text.maxWidth=d,this.text.maxHeight=e,this.container.displayGroup.add(this.text),this.text.fixedToCamera=!0,this.text.tint=this.tint,this.text.inputEnabled=!0,this.text.input.useHandCursor=!0,this.text.events.onInputOver.add(function(){this.text.tint=this.hoverTint},this),this.text.events.onInputOut.add(function(){this.text.tint=this.tint},this),this.text.events.onInputDown.add(function(){this.text.tint=this.downTint},this),this.text.events.onInputUp.add(function(){this.text.tint=this.tint},this),this.events=this.text.events},SlickUI.Element.TextButton.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme");"undefined"==typeof this.font&&(this.font=Object.keys(a.fonts)[Object.keys(a.fonts).length-1]),this.reset(this._x,this._y)},SlickUI.Element.TextButton.prototype.centerHorizontally=function(){return this.text.cameraOffset.x=this.text.maxWidth/2-this.text.width/2+this.container.x,this},SlickUI.Element.TextButton.prototype.centerVertically=function(){var a=game.cache.getJSON("slick-ui-theme");return this.text.cameraOffset.y=this.container.height/2-this.text.height/2-Math.round(a.button["border-y"]/2)+this.container.y,this},SlickUI.Element.TextButton.prototype.center=function(){return this.centerHorizontally(),this.centerVertically(),this},Object.defineProperty(SlickUI.Element.TextButton.prototype,"x",{get:function(){return this.text.cameraOffset.x-this.container.x},set:function(a){this.text.cameraOffset.x=a+this.container.x}}),Object.defineProperty(SlickUI.Element.TextButton.prototype,"y",{get:function(){return this.text.cameraOffset.y-this.container.y},set:function(a){this.text.cameraOffset.y=a+this.container.y}}),Object.defineProperty(SlickUI.Element.TextButton.prototype,"value",{get:function(){return this.text.text},set:function(a){this.text.text=a}}),SlickUI.Element=SlickUI.Element?SlickUI.Element:{},SlickUI.Element.TextField=function(a,b,c,d,e){"undefined"==typeof e&&(e=7),this._x=a,this._y=b,this._offsetX=a,this._offsetY=b,this._width=c,this._height=d,this.maxChars=e,this.container=null,this.value="",this.events={onOK:new Phaser.Signal,onToggle:new Phaser.Signal,onKeyPress:new Phaser.Signal}},SlickUI.Element.TextField.prototype.setContainer=function(a){this.container=new SlickUI.Container.Container(a)},SlickUI.Element.TextField.prototype.init=function(){var a=game.cache.getJSON("slick-ui-theme"),b=this.container.x=this.container.parent.x+this._x,c=this.container.y=this.container.parent.y+this._y,d=this.container.width=Math.min(this.container.parent.width-this._x,this._width),e=this.container.height=Math.min(this.container.parent.height-this._y,this._height);this.container.x+=Math.round(a.text_field["border-x"]/2),this.container.y+=Math.round(a.text_field["border-y"]/2),this.container.width-=a.text_field["border-x"],this.container.height-=a.text_field["border-y"];var f=function(f){var g=game.add.bitmapData(d,e);return g.copyRect(f,new Phaser.Rectangle(0,0,a.text_field["border-x"],a.text_field["border-y"])),g.copy(f,a.text_field["border-x"]+1,0,1,a.text_field["border-y"],a.text_field["border-x"],0,d-2*a.text_field["border-x"],a.text_field["border-y"]),g.copyRect(f,new Phaser.Rectangle(f.width-a.text_field["border-x"],0,a.text_field["border-x"],a.text_field["border-y"]),d-a.text_field["border-x"]),g.copy(f,0,a.text_field["border-y"]+1,a.text_field["border-x"],1,0,a.text_field["border-y"],a.text_field["border-x"],e-2*a.text_field["border-y"]),g.copy(f,f.width-a.text_field["border-x"],a.text_field["border-y"]+1,a.text_field["border-x"],1,d-a.text_field["border-x"],a.text_field["border-y"],a.text_field["border-x"],e-2*a.text_field["border-y"]),g.copyRect(f,new Phaser.Rectangle(0,f.height-a.text_field["border-y"],a.text_field["border-x"],a.text_field["border-y"]),0,e-a.text_field["border-y"]),g.copyRect(f,new Phaser.Rectangle(f.width-a.text_field["border-x"],f.height-a.text_field["border-y"],a.text_field["border-x"],a.text_field["border-y"]),d-a.text_field["border-x"],e-a.text_field["border-y"]),g.copy(f,a.text_field["border-x"]+1,f.height-a.text_field["border-y"],1,a.text_field["border-y"],a.text_field["border-x"],e-a.text_field["border-y"],d-2*a.text_field["border-x"],a.text_field["border-y"]),g.copy(f,a.text_field["border-x"],a.text_field["border-y"],1,1,a.text_field["border-x"],a.text_field["border-y"],d-2*a.text_field["border-x"],e-2*a.text_field["border-y"]),game.make.sprite(b,c,g)};this.sprite=game.make.sprite(b,c,f(game.make.sprite(0,0,"slick-ui-text_field")).texture),this.sprite.inputEnabled=!0,this.sprite.input.useHandCursor=!0,this.container.displayGroup.add(this.sprite),this.sprite.x=b,this.sprite.y=c,this._offsetX=b,this._offsetY=c,this.sprite.fixedToCamera=!0;var g=!1;this.sprite.events.onInputOver.add(function(){g=!0},this),this.sprite.events.onInputOut.add(function(){g=!1},this);var h=new SlickUI.Keyboard.Keyboard(Object.keys(a.fonts)[Object.keys(a.fonts).length-1]);h.group.cameraOffset.y=game.height,h.group.visible=!1;var i=!1;this.sprite.events.onInputDown.add(function(){i||(i=!0,h.group.visible?(game.add.tween(h.group.cameraOffset).to({y:game.height},500,Phaser.Easing.Exponential.Out,!0).onComplete.add(function(){i=!1,h.group.visible=!1}),this.events.onToggle.dispatch(!1)):(h.group.visible=!0,game.add.tween(h.group.cameraOffset).to({y:game.height-h.height},500,Phaser.Easing.Exponential.Out,!0).onComplete.add(function(){i=!1}),this.events.onToggle.dispatch(!0)))},this),this.text=this.add(new SlickUI.Element.Text(8,0,"A")),this.text.centerVertically(),this.text.text.text=this.value,h.events.onKeyPress.add(function(a){"DEL"==a?this.value=this.value.substr(0,this.value.length-1):this.value=(this.value+a).substr(0,this.maxChars),this.text.text.text=this.value,this.events.onKeyPress.dispatch(a)},this),h.events.onOK.add(function(){this.sprite.events.onInputDown.dispatch(),this.events.onOK.dispatch()},this)},SlickUI.Element.TextField.prototype.add=function(a){return this.container.add(a)},Object.defineProperty(SlickUI.Element.TextField.prototype,"x",{get:function(){return this._x-this.container.parent.x},set:function(a){this._x=a,this.container.displayGroup.x=this.container.parent.x+a-this._offsetX}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"y",{get:function(){return this._y-this.container.parent.y},set:function(a){this._y=a,this.container.displayGroup.y=this.container.parent.y+a-this._offsetY}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"visible",{get:function(){return this.container.displayGroup.visible},set:function(a){this.container.displayGroup.visible=a}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"alpha",{get:function(){return this.container.displayGroup.alpha},set:function(a){this.container.displayGroup.alpha=a}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"width",{get:function(){return this.container.width},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._width=Math.round(a+b.text_field["border-x"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),Object.defineProperty(SlickUI.Element.TextField.prototype,"height",{get:function(){return this.container.height},set:function(a){var b=game.cache.getJSON("slick-ui-theme");this._height=Math.round(a+b.text_field["border-y"]),this.sprite.destroy(),this.init(),this.container.displayGroup.sendToBack(this.sprite)}}),SlickUI.Keyboard=SlickUI.Keyboard?SlickUI.Keyboard:{},SlickUI.Keyboard.Key=function(a,b,c,d,e,f,g){this.group=game.add.group(),this.font=e,this._x=a,this._y=b,this._width=c,this._height=d,this.fontSize=f,this.text=g},SlickUI.Keyboard.Key.prototype.init=function(){var a=game.make.graphics(0,0);a.beginFill(13619151),a.drawRoundedRect(0,0,this._width,this._height,5),a.beginFill(16777215),a.drawRoundedRect(1,1,this._width-2,this._height-2,5);var b=game.make.graphics(0,0);b.beginFill(1542840),b.drawRoundedRect(0,0,this._width,this._height,5),b.beginFill(2074593),b.drawRoundedRect(1,1,this._width-2,this._height-2,5);var c=game.make.sprite(this._x,this._y,a.generateTexture()),d=game.make.sprite(this._x,this._y,b.generateTexture()),e=game.make.sprite(this._x,this._y,c.texture),f=!1;e.inputEnabled=!0,e.input.useHandCursor=!0,e.events.onInputDown.add(function(){e.loadTexture(d.texture)}),e.events.onInputUp.add(function(){e.loadTexture(c.texture),f||e.events.onInputUp.halt()}),e.events.onInputOver.add(function(){f=!0},this),e.events.onInputOut.add(function(){f=!1},this);var g=game.make.bitmapText(this._x,this._y,this.font,this.text,this.fontSize);g.x+=this._width/2-g.width/2,g.y+=this._height/2-this.fontSize/2-4,this.group.add(e),this.group.add(g),this.events=e.events},SlickUI.Keyboard=SlickUI.Keyboard?SlickUI.Keyboard:{},SlickUI.Keyboard.Keyboard=function(a,b,c){this.group=game.add.group(),this.keyGroupLower=game.make.group(),this.keyGroupUpper=game.make.group(),this.keyGroupCurrent=this.keyGroupLower,this.keyGroupUpper.visible=!1,this.group.fixedToCamera=!0,this.font=a,this.fontSize=b,this.height=160,this.events={onKeyPress:new Phaser.Signal,onOK:new Phaser.Signal},"undefined"==typeof b&&(this.fontSize=16),!1!==c&&this.create()},SlickUI.Keyboard.Keyboard.prototype.create=function(){var a=game.make.bitmapData(game.width,this.height);a.ctx.beginPath(),a.ctx.rect(0,0,game.width,this.height),a.ctx.fillStyle="#cccccc",a.ctx.fill(),a.ctx.beginPath(),a.ctx.rect(0,2,game.width,this.height-2),a.ctx.fillStyle="#f0f0f0",a.ctx.fill();var b=game.make.sprite(0,0,a);this.group.add(b),this.group.add(this.keyGroupLower),this.group.add(this.keyGroupUpper);var c=440,d=Math.round(game.world.centerX-c/2);this.addKey(new SlickUI.Keyboard.Key(d,16,32,32,this.font,this.fontSize,"1"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+36,16,32,32,this.font,this.fontSize,"2"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+72,16,32,32,this.font,this.fontSize,"3"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+108,16,32,32,this.font,this.fontSize,"4"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+144,16,32,32,this.font,this.fontSize,"5"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+180,16,32,32,this.font,this.fontSize,"6"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+216,16,32,32,this.font,this.fontSize,"7"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+252,16,32,32,this.font,this.fontSize,"8"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+288,16,32,32,this.font,this.fontSize,"9"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+324,16,32,32,this.font,this.fontSize,"0"),this.group),this.addKey(new SlickUI.Keyboard.Key(d+360,16,64,32,this.font,this.fontSize,"DEL"),this.group),d+=16,this.addKey(new SlickUI.Keyboard.Key(d,52,32,32,this.font,this.fontSize,"q")),this.addKey(new SlickUI.Keyboard.Key(d+36,52,32,32,this.font,this.fontSize,"w")),this.addKey(new SlickUI.Keyboard.Key(d+72,52,32,32,this.font,this.fontSize,"e")),this.addKey(new SlickUI.Keyboard.Key(d+108,52,32,32,this.font,this.fontSize,"r")),this.addKey(new SlickUI.Keyboard.Key(d+144,52,32,32,this.font,this.fontSize,"t")),this.addKey(new SlickUI.Keyboard.Key(d+180,52,32,32,this.font,this.fontSize,"y")),this.addKey(new SlickUI.Keyboard.Key(d+216,52,32,32,this.font,this.fontSize,"u")),this.addKey(new SlickUI.Keyboard.Key(d+252,52,32,32,this.font,this.fontSize,"i")),this.addKey(new SlickUI.Keyboard.Key(d+288,52,32,32,this.font,this.fontSize,"o")),this.addKey(new SlickUI.Keyboard.Key(d+324,52,32,32,this.font,this.fontSize,"p")),this.addKey(new SlickUI.Keyboard.Key(d+360,52,32,32,this.font,this.fontSize,"!"),this.group),d+=16,this.addKey(new SlickUI.Keyboard.Key(d,88,32,32,this.font,this.fontSize,"a")),this.addKey(new SlickUI.Keyboard.Key(d+36,88,32,32,this.font,this.fontSize,"s")),this.addKey(new SlickUI.Keyboard.Key(d+72,88,32,32,this.font,this.fontSize,"d")),this.addKey(new SlickUI.Keyboard.Key(d+108,88,32,32,this.font,this.fontSize,"f")),this.addKey(new SlickUI.Keyboard.Key(d+144,88,32,32,this.font,this.fontSize,"g")),this.addKey(new SlickUI.Keyboard.Key(d+180,88,32,32,this.font,this.fontSize,"h")),this.addKey(new SlickUI.Keyboard.Key(d+216,88,32,32,this.font,this.fontSize,"j")),this.addKey(new SlickUI.Keyboard.Key(d+252,88,32,32,this.font,this.fontSize,"k")),this.addKey(new SlickUI.Keyboard.Key(d+288,88,32,32,this.font,this.fontSize,"l")),
this.addKey(new SlickUI.Keyboard.Key(d+324,88,80,32,this.font,this.fontSize,"UPPER")),d+=16,this.addKey(new SlickUI.Keyboard.Key(d-40,124,36,32,this.font,this.fontSize,"OK"),this.group),this.addKey(new SlickUI.Keyboard.Key(d,124,32,32,this.font,this.fontSize,"z")),this.addKey(new SlickUI.Keyboard.Key(d+36,124,32,32,this.font,this.fontSize,"x")),this.addKey(new SlickUI.Keyboard.Key(d+72,124,32,32,this.font,this.fontSize,"c")),this.addKey(new SlickUI.Keyboard.Key(d+108,124,32,32,this.font,this.fontSize,"v")),this.addKey(new SlickUI.Keyboard.Key(d+144,124,32,32,this.font,this.fontSize,"b")),this.addKey(new SlickUI.Keyboard.Key(d+180,124,32,32,this.font,this.fontSize,"n")),this.addKey(new SlickUI.Keyboard.Key(d+216,124,32,32,this.font,this.fontSize,"m")),this.addKey(new SlickUI.Keyboard.Key(d+252,124,32,32,this.font,this.fontSize,","),this.group),this.addKey(new SlickUI.Keyboard.Key(d+288,124,32,32,this.font,this.fontSize,"."),this.group),this.addKey(new SlickUI.Keyboard.Key(d+324,124,32,32,this.font,this.fontSize," "),this.group),d-=32,this.keyGroupCurrent=this.keyGroupUpper,this.addKey(new SlickUI.Keyboard.Key(d,52,32,32,this.font,this.fontSize,"Q")),this.addKey(new SlickUI.Keyboard.Key(d+36,52,32,32,this.font,this.fontSize,"W")),this.addKey(new SlickUI.Keyboard.Key(d+72,52,32,32,this.font,this.fontSize,"E")),this.addKey(new SlickUI.Keyboard.Key(d+108,52,32,32,this.font,this.fontSize,"R")),this.addKey(new SlickUI.Keyboard.Key(d+144,52,32,32,this.font,this.fontSize,"T")),this.addKey(new SlickUI.Keyboard.Key(d+180,52,32,32,this.font,this.fontSize,"Y")),this.addKey(new SlickUI.Keyboard.Key(d+216,52,32,32,this.font,this.fontSize,"U")),this.addKey(new SlickUI.Keyboard.Key(d+252,52,32,32,this.font,this.fontSize,"I")),this.addKey(new SlickUI.Keyboard.Key(d+288,52,32,32,this.font,this.fontSize,"O")),this.addKey(new SlickUI.Keyboard.Key(d+324,52,32,32,this.font,this.fontSize,"P")),d+=16,this.addKey(new SlickUI.Keyboard.Key(d,88,32,32,this.font,this.fontSize,"A")),this.addKey(new SlickUI.Keyboard.Key(d+36,88,32,32,this.font,this.fontSize,"S")),this.addKey(new SlickUI.Keyboard.Key(d+72,88,32,32,this.font,this.fontSize,"D")),this.addKey(new SlickUI.Keyboard.Key(d+108,88,32,32,this.font,this.fontSize,"F")),this.addKey(new SlickUI.Keyboard.Key(d+144,88,32,32,this.font,this.fontSize,"G")),this.addKey(new SlickUI.Keyboard.Key(d+180,88,32,32,this.font,this.fontSize,"H")),this.addKey(new SlickUI.Keyboard.Key(d+216,88,32,32,this.font,this.fontSize,"J")),this.addKey(new SlickUI.Keyboard.Key(d+252,88,32,32,this.font,this.fontSize,"K")),this.addKey(new SlickUI.Keyboard.Key(d+288,88,32,32,this.font,this.fontSize,"L")),this.addKey(new SlickUI.Keyboard.Key(d+324,88,80,32,this.font,this.fontSize,"lower")),d+=16,this.addKey(new SlickUI.Keyboard.Key(d,124,32,32,this.font,this.fontSize,"Z")),this.addKey(new SlickUI.Keyboard.Key(d+36,124,32,32,this.font,this.fontSize,"X")),this.addKey(new SlickUI.Keyboard.Key(d+72,124,32,32,this.font,this.fontSize,"C")),this.addKey(new SlickUI.Keyboard.Key(d+108,124,32,32,this.font,this.fontSize,"V")),this.addKey(new SlickUI.Keyboard.Key(d+144,124,32,32,this.font,this.fontSize,"B")),this.addKey(new SlickUI.Keyboard.Key(d+180,124,32,32,this.font,this.fontSize,"N")),this.addKey(new SlickUI.Keyboard.Key(d+216,124,32,32,this.font,this.fontSize,"M"))},SlickUI.Keyboard.Keyboard.prototype.addKey=function(a,b){a.init(),"undefined"==typeof b&&(b=this.keyGroupCurrent),b.add(a.group),a.events.onInputUp.add(function(){return"UPPER"==a.text||"lower"==a.text?void this.toggleMode():"OK"==a.text?void this.events.onOK.dispatch():void this.events.onKeyPress.dispatch(a.text)},this)},SlickUI.Keyboard.Keyboard.prototype.toggleMode=function(){this.keyGroupUpper.visible=!this.keyGroupUpper.visible,this.keyGroupLower.visible=!this.keyGroupLower.visible};